'use strict';function passLogin(){var a=document.querySelector('#username').value,b=document.querySelector('#password').value;$('#loginLoading').show(),$('#loginDisplay').hide(),$.ajax('/login',{method:'POST',data:JSON.stringify({user:{username:a,password:b}}),headers:{'Content-Type':'Application/JSON'},success:function success(c){'Success'===c.message&&c.details&&c.details.token?window.location.href='/?token='+c.details.token:($('#passwordError').text(c.message),$('#passwordError').show())},error:function error(c){$('#loginLoading').hide(),$('#loginDisplay').show(),console.error(c)}})}function forgotPass(){var b=document.getElementById('email').value;/\S+@\S+\.\S+/.test(b)?($.ajax({url:'/forgot',data:JSON.stringify({email:b}),method:'POST',headers:{'Content-Type':'Application/JSON'}}),$('#email').addClass('alert-success').text('Email sent to '+b).show()):$('#email').addClass('alert-danger').text('Please supply a valid email').show()}function submitRegistration(){var b=document.querySelectorAll('#register input'),c={};b.forEach(function(d){c[d.id]=d.value}),$.ajax('/newUser',{method:'POST',data:JSON.stringify(c),headers:{'Content-Type':'Application/JSON'},success:function success(d){console.log(d),alert=$('#register .alert').show().text(d.message)},error:function error(d){alert=$('#register .alert').show().text(d)}})}function handleOnLoad(){$('#loginBtn').on('click',passLogin),$('#register input').each(function(a){a.on('keyup',function(b){13===b.keyCode&&passLogin()})}),$('#submit').on('click',submitRegistration),$('#subForgot').on('click',forgotPass),'/logout'===window.location.pathname&&history.pushState({loaded:!0},'Tire-HQ','/')}'loading'===document.readyState?document.addEventListener('DOMContentLoaded',handleOnLoad):handleOnLoad();
