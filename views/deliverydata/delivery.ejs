<% include ../partials/header %>

<div class="row">
    <div class="col">
    <div class="col-md-8 pt-4 mx-auto pb-5">
    <div class="card">
        <div class="card-header bg-success text-light">
            <form method="POST" action="/delivery/bt">
            <div class="form-group row">
                <h4 class="col-lg-4 card-title"><%= deliverydata.ddesc %></h4>
                <label class="col-lg-2 col-form-label" for="docno">Doc Number</label><div class="col-lg-2"><input type="text" name="docno" class="form-control" <%if (docno) { %> value="<%=docno%>"<%}%> ></div>
                <label class="col-lg-1 pr-0 col-form-label" for="date">Date</label><div class="col-lg-3"><input type="date" name="date" class="form-control" placeholder="mm/dd/yyyy" <%if (date) { %> value="<%=date%>"<%}%>></div>
            </div>
        </div>
        <div class="card-body" onload="document.getElementById('standard').checked = true;">
            <div class="alert alert-danger" id="invalid-dd">Error! Please enter a valid document number and date</div>
            <div class="alert alert-danger" id="invalid-na">Error! Please enter a valid national account number</div>
            
            <% for (let fields in deliverydata.entries){%>
                <div class="form-group row pt-lg-3">
                    <div class="col-lg-2"></div>
                    <label for="<%=fields.id%>" class="col-lg-4 col-form-label"><%=deliverydata.entries[fields].label%></label>
                    <div class="col-lg-4">
                        <input type="<%=deliverydata.entries[fields].type%>" class="form-control" id="<%=deliverydata.entries[fields].id%>" name="<%=deliverydata.entries[fields].id%>" <%if(deliverydata.entries[fields].id=='nationalaccount'&&nano) {%>value="<%=nano%>"<%}%>>
                    </div>
                    <div class="col-lg-2"></div>
                </div>
            <% } %>
                <div class="form-group row pt-lg-3">
                    <div class="col-lg-2"></div>
                    <label for="veh-type" class="col-lg-4 col-form-label">Vehicle Type</label>
                        <div class="col-lg-4">
                            <select class="form-control">
                                <% for (let fields in deliverydata.vehtype) {%>
                                    <option value="<%=deliverydata.vehtype[fields].value%>"><%=deliverydata.vehtype[fields].label%></option>
                                <%}%>
                            </select>
                        </div>
                        <div class="col-lg-2"></div>
                </div>
                <div class="divider"></div>
                <div class="row">
                    <div class="col"><h6 class="text-center">Delivery Information</h6></div>
                </div>
                <div class="form-group row">
                    <div class="col"></div>
                    <div class="col-lg-3">
                        <%for (let fields in deliverydata.radios) {%>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="<%=deliverydata.radios[fields].name%>" id="<%=deliverydata.radios[fields].id%>" value="<%=deliverydata.radios[fields].value%>">
                                <label class="form-check-label" for="<%=deliverydata.radios[fields].id%>"><%=deliverydata.radios[fields].label%></label>
                            </div>
                        <%}%>
                        <div class="alert alert-danger" id="invalid-drtype">Please select a Delivery Type!</div>
                        
                    </div>
                    
                    <div class="col-lg-3">

                        <% for (let fields in deliverydata.checkboxes) {%>
                            <div class="form-check">
                                <input class="form-check-input" type="<%=deliverydata.checkboxes[fields].type%>" name="<%=deliverydata.checkboxes[fields].name%>" id="<%=deliverydata.checkboxes[fields].id%>" value="<%=deliverydata.checkboxes[fields].value%>">
                                <label class="form-check-label" for="<%=deliverydata.checkboxes[fields].id%>"><%=deliverydata.checkboxes[fields].label%></label>
                            </div>
                        <%}%>
                        
                    </div>
                <div class="col"></div>
                </div>
                
                <div class="col text-center">
                    <input type="hidden" name="dtype" value="<%=deliverydata.dtype%>">
                    <input class="btn btn-primary mx-auto text-light" type="Submit" value="Next">
                </div>
                
            </form>
        </div>
        

    </div>
    </div>
    <div class="col"></div>
    </div>
</div>

<script>
        var err = undefined;
        var params = window.location.href.split('?')[1];
        var indiv = params.split('&');
        for (let a of indiv) {
            if (a.indexOf('err') > -1) {
                err = a.split('=')[1];
            }
        }
        if (err) {
            if (err == 3) {
                document.getElementById('invalid-na').style.display = 'block';
            } else if (err == 2) {
                document.getElementById('invalid-drtype').style.display = 'block';
            } else if (err == 5) {
                document.getElementById('invalid-dd').style.display = 'block';
            }
        }
</script>
<% include ../partials/footer %>